{% extends 'tom_common/base.html' %}
{% load bootstrap4 %}
{% block content %}
<div class="row">
  <div class="col-md-10">
    <div class="row">
      <div class="col-md-6">
        {% bootstrap_pagination page_obj extra=request.GET.urlencode %}
      </div>
      <div class="col-md-6">
        <span class="float-right">
        <a href="{% url 'targets:create' %}" class="btn btn-primary" title="Add Target">Add a target</a>
        <a href="{% url 'targets:import' %}" class="btn btn-primary" title="Import Targets">Import Targets</a>
        </span>
      </div>
    </div>
    <table class="table">
      <thead><tr><th>ID</th><th>Name</th><th>Type</th><th>Observations</th><th>Saved Data</th></tr></thead>
      <tbody>
        {% for target in filter.qs %}
        <tr>
          <td><a href="{% url 'targets:detail' target.id %}" title="{{ target.identifier }}">{{ target.identifier }}</a></td>
          <td>{{ target.name }}</td>
          <td>{{ target.get_type_display }}</td>
          <td>{{ target.observationrecord_set.count }}</td>
          <td>{{ target.dataproduct_set.count }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% bootstrap_pagination page_obj extra=request.GET.urlencode %}
  </div>
  <div class="col-md-2">
    <form action="" method="get" class="form">
      {% bootstrap_form filter.form %}
      {% buttons %}
        <button type="submit" class="btn btn-primary">
          Filter
        </button>
        <a href="{% url 'targets:list' %}" class="btn btn-secondary" title="Reset">Reset</a>
      {% endbuttons %}
    </form>
  </div>
</div>
{% endblock %}
